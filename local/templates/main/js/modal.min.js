!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Modal=t()}(this,(function(){"use strict";var e=Object.prototype.hasOwnProperty;function t(t,n){return e.call(t,n)}function n(e,t){v(e)||(e=[]),v(t)||(t=[]);var n=e.length,r=0;if("number"==typeof t.length)for(var o=t.length;r<o;r++)e[n++]=t[r];else for(;void 0!==t[r];)e[n++]=t[r++];return e.length=n,e}var r,o,i=(r=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},o=Object.create(null),function(e){return o[e]||(o[e]=r(e))});function a(e,t){t=t||0;for(var n=e.length-t,r=new Array(n);n--;)r[n]=e[n+t];return r}function l(e){return"string"==typeof e}function s(e){if(!c(e)||"[object Object]"!==function(e){return Object.prototype.toString.call(e)}(e))return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=t.hasOwnProperty("constructor")&&t.constructor;return"function"==typeof n&&Function.prototype.toString.call(n)===Function.prototype.toString.call(Object)}function c(e){return!!e&&"object"==typeof e}function u(e){return c(e)&&!s(e)&&"nodeType"in e}function f(e){return u(e)&&e.nodeType===Node.ELEMENT_NODE}function d(e){return null===e}function p(e){return null==e}function v(e){return!p(e)&&Array.isArray(e)}function h(e){return"function"==typeof e}function y(e){return!!e&&("object"==typeof e||"function"==typeof e)}function g(e){return!p(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function m(e){!function(e){console.error(e)}(e)}function _(e){console.log(e)}function b(e,t,n){var r;try{r=n?e.apply(t,n):e.call(t)}catch(e){m(e)}return r}var N=/^\s*function (\w+)/,w=/^(String|Number|Boolean|Function|Symbol|BigInt)$/;function C(e,t){var n={content:{type:[String,Function,Node,Promise],default:""},preloader:{type:String,default:function(e,t){var n=E(this,e,t,"preloaderColor");return'\n                    <div class="'+x.PRELOADER_ICON+'">\n                        <svg '+(n?'style="fill: '+n+'"':"")+' version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">\n                            <path d="M31.6,3.5C5.9,13.6-6.6,42.7,3.5,68.4c10.1,25.7,39.2,38.3,64.9,28.1l-3.1-7.9c-21.3,8.4-45.4-2-53.8-23.3 c-8.4-21.3,2-45.4,23.3-53.8L31.6,3.5z"/>\n                            <path d="M42.3,39.6c5.7-4.3,13.9-3.1,18.1,2.7c4.3,5.7,3.1,13.9-2.7,18.1l4.1,5.5c8.8-6.5,10.6-19,4.1-27.7 c-6.5-8.8-19-10.6-27.7-4.1L42.3,39.6z"/>\n                            <path d="M82,35.7C74.1,18,53.4,10.1,35.7,18S10.1,46.6,18,64.3l7.6-3.4c-6-13.5,0-29.3,13.5-35.3s29.3,0,35.3,13.5 L82,35.7z"/>\n                        </svg>\n                    </div>\n                '}},preloaderColor:{type:String,default:"#fff"},effect:{type:String,default:""},contentEffect:{type:String,default:""},cacheContent:{type:Boolean,default:!0},container:{type:[String,Node],default:document.body,validator:function(e){var t=!1;if(l(e)){var n=document.querySelector(e);u(n)&&(t=!0,e=n)}else u(e)&&(t=!0);return{valid:t,value:e}}},overflowContainer:{type:[Node,String],default:document.body,validator:function(e){var t=!1;if(!u(e)||e!==document.body&&e!==document.documentElement){if(l(e))switch(e){case"body":t=!0,e=document.body;break;case"html":t=!0,e=document.documentElement}}else t=!0;return{valid:t,value:e}}}};for(var r in n)t[r]=E(e,n,t,r);return t}function E(e,n,r,o){var a=n[o],l=r[o],s=a.type,c=!s||!0===s,u=[];if(s){Array.isArray(s)||(s=[s]);for(var f=0;f<s.length&&!c;f++){var d=A(l,s[f]);u.push(d.expectedType||""),c=d.valid}}var p=u.some((function(e){return e}));void 0!==l&&!c&&p&&_('Invalid option: type check failed for option "'+o+'". Expected type: '+u.map(i).join(", ")+".");var v=a.validator;if(void 0!==l&&v){var h=v(l);h.value&&(l=h.value),h.valid||(c=!1,_('Invalid option: validator check failed for option "'+o+'".'))}return void 0!==l&&c||(l=function(e,n,r,o){var i=n[o];if(!t(i,"default"))return;var a=i.default;return"function"==typeof a&&"Function"!==O(i.type)?b(a,e,[n,r]):a}(e,n,r,o)),l}function A(e,t){var n,r=O(t);if(w.test(r)){var o=typeof e;(n=o===r.toLowerCase())||"object"!==o||(n=e instanceof t)}else if("Object"===r)n=s(e);else if("Array"===r)n=Array.isArray(e);else try{n=e instanceof t}catch(e){m('Invalid option type: "'+String(t)+'" is not a constructor'),n=!1}return{valid:n,expectedType:r}}function O(e){var t=e&&e.toString().match(N);return t?t[1]:""}var R="b-modal",S={FIXED_CONTENT:".b-modal-fixed"},x={BLOCK:R,OPEN:R+"-open",HIDE:R+"-hide",OVERLAY:R+"--overlay",CONTAINER:R+"__container",WRAPPER:R+"__wrapper",PRELOADER:R+"__preloader",PRELOADER_ICON:R+"__preloader-icon",DIALOG:R+"__dialog"},T="setContent",D="init",k="beforeShow",$="afterShow",j="beforeHide",L="afterHide",I="beforeSetContent",P="afterSetContent",B="destroy";var H=[];function M(){return H.length}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function F(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function V(e,t){if(u(e)&&(u(e.parentNode)||u(t))){var n=u(e.parentNode)?e.parentNode:u(t)?t:null;n&&n.removeChild(e)}}function U(e){if(u(e))for(;e.childNodes.length>0;)e.removeChild(e.firstChild);else l(e)&&U(document.getElementById(e))}function q(e,t,n){if(f(e)){if(d(t))return e.removeAttribute("style"),e;if(s(t))return Object.entries(t).forEach((function(t){var n=t[0],r=t[1];q(e,n,r)})),e;if(l(t)){if(function(e){return void 0===e}(n)&&e.nodeType!==Node.DOCUMENT_NODE){var r=getComputedStyle(e);return t in r?r[t]:r.getPropertyValue(t)}if(d(n)||""===n||"null"===n)return e.style[t]="",e;if(l(n)||function(e){return!Number.isNaN(e)&&"number"==typeof e}(n))return e.style[t]=n,e}}return null}function G(e,t){u(t)&&(u(e)?t.appendChild(e):l(e)&&t.insertAdjacentHTML("beforeend",e))}function z(e,t,n){void 0===t&&(t={}),void 0===n&&(n=document);var r=e,o=t;return c(e)&&(o=e,r=e.tag),function(e,t){if(void 0===t&&(t={}),!e.nodeType)return null;var n=e;if(e.nodeType===Node.DOCUMENT_NODE&&(n=e.body),s(t)){if(s(t.attrs)&&Object.keys(t.attrs).forEach((function(e){"class"!==e&&"classname"!==e.toLowerCase()?""!=t.attrs[e]?n.setAttribute(e,t.attrs[e]):n.removeAttribute(e):n.className=t.attrs[e]})),s(t.style)&&q(n,t.style),s(t.props)&&Object.keys(t.props).forEach((function(e){n[e]=t.props[e]})),s(t.events)&&Object.keys(t.events).forEach((function(e){n.addEventListener(e,t.events[e])})),s(t.dataset)&&Object.keys(t.dataset).forEach((function(e){n.dataset[e]=t.dataset[e]})),l(t.children)&&(t.children=[t.children]),v(t.children)&&t.children.length>0)return t.children.forEach((function(e){u(e)&&G(e,n),l(e)&&(n.innerHTML+=e)})),n;if("text"in t&&!p(t.text))return n.innerText=t.text,n;"html"in t&&!p(t.html)&&(n.innerHTML=t.html)}return n}(n.createElement(r),o)}function X(e,t,r,o){if(!e||!e.childNodes)return null;r=!!r,o=!!o;for(var i=e.childNodes.length,a=[],l=0;l<i;l++){var s=e.childNodes[l];if(Q(s,t)){if(!o)return s;a.push(s)}if(1==r){var c=X(s,t,r,o);if(c){if(!o)return c;a=n(a,c)}}}return o||a.length>0?a:null}function K(e,t){if(f(e)){if(l(t)){var n=t.trim();if(n.length>0){if(n.includes(" "))return n.split(" ").every((function(t){return K(e,t)}));if("classList"in e)return e.classList.contains(n);if(y(e.className)&&l(e.className.baseVal))return e.getAttribute("class").split(" ").some((function(e){return e===n}))}}if(v(t)&&t.length>0)return t.every((function(t){return K(e,t)}))}return!1}function Y(e,t){if(f(e)){if(l(t)){var n=t.trim();if(n.length>0){if(n.includes(" "))return void Y(e,n.split(" "));if("classList"in e)return void e.classList.add(n);if(y(e.className)&&l(e.className.baseVal)){if(""===e.className.baseVal)return void(e.className.baseVal=n);var r=e.className.baseVal.split(" ");if(!r.includes(n))return r.push(n),void(e.className.baseVal=r.join(" ").trim())}return}}v(t)&&t.forEach((function(t){return Y(e,t)}))}}function J(e,t){if(f(e)){if(l(t)){var n=t.trim();if(n.length>0){if(n.includes(" "))return void J(e,n.split(" "));if("classList"in e)return void e.classList.remove(n);if(y(e.className)&&l(e.className.baseVal)){var r=e.className.baseVal.split(" ").filter((function(e){return e!==n}));return void(e.className.baseVal=r.join(" "))}}}v(t)&&t.forEach((function(t){return J(e,t)}))}}function Q(e,t){if(h(t=t||{}))return t.call(window,e);if(!t.allowTextNodes&&!f(e))return!1;var n,r,o;for(n in t)if(t.hasOwnProperty(n))switch(n){case"tag":case"tagName":if(l(t[n])){if(e.tagName.toUpperCase()!=t[n].toUpperCase())return!1}else if(t[n]instanceof RegExp&&!t[n].test(e.tagName))return!1;break;case"class":case"className":if(l(t[n])){if(!K(e,t[n]))return!1}else if(t[n]instanceof RegExp&&(!l(e.className)||!t[n].test(e.className)))return!1;break;case"attr":case"attrs":case"attribute":if(l(t[n])){if(!e.getAttribute(t[n]))return!1}else if(v(t[n])){for(r=0,o=t[n].length;r<o;r++)if(t[n]&&!e.getAttribute(t[n]))return!1}else for(r in t[n])if(t[n].hasOwnProperty(r)){var i=e.getAttribute(r);if(t[n][r]instanceof RegExp){if(!l(i)||!t[n][r].test(i))return!1}else if(i!=""+t[n][r])return!1}break;case"property":case"props":if(l(t[n])){if(!e[t[n]])return!1}else if(v(t[n])){for(r=0,o=t[n].length;r<o;r++)if(t[n]&&!e[t[n]])return!1}else for(r in t[n])if(l(t[n][r])){if(e[r]!=t[n][r])return!1}else if(t[n][r]instanceof RegExp&&(!l(e[r])||!t[n][r].test(e[r])))return!1;break;case"callback":return t[n](e)}return!0}var Z="undefined"!=typeof window,ee=Z&&window.navigator.userAgent.toLowerCase(),te=ee&&ee.indexOf("msie 9.0")>0;function ne(e,t,n,r,o,i,a){if(void 0===r&&(r=""),void 0===o&&(o=!0),void 0===i&&(i=!0),void 0===a&&(a=null),u(t)&&u(n)){if(o&&U(n),!r||!i)return G(t,n),void(h(a)&&b(a,e));var l=oe(r);Y(t,l.enterClass),Y(t,l.enterActiveClass),G(t,n);var s=le(t);ce((function(){Y(t,l.enterToClass),J(t,l.enterClass)})),setTimeout((function(){J(t,l.enterActiveClass),J(t,l.enterToClass),h(a)&&b(a,e)}),s)}}function re(e,t,n,r,o){if(void 0===o&&(o=null),u(t)&&u(n)){if(!r)return h(o)&&b(o,e),void V(t,n);var i=oe(r);Y(t,i.leaveClass),Y(t,i.leaveActiveClass),ce((function(){var r=le(t);J(t,i.leaveClass),Y(t,i.leaveToClass),setTimeout((function(){J(t,i.leaveActiveClass),J(t,i.leaveToClass),h(o)&&b(o,e),V(t,n)}),r)}))}}function oe(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}}var ie="transition",ae="animation";function le(e){var t=window.getComputedStyle(e),n=ue((t[ie+"Delay"]||"").split(", "),(t[ie+"Duration"]||"").split(", ")),r=ue((t[ae+"Delay"]||"").split(", "),(t[ae+"Duration"]||"").split(", "));return Math.max(n,r)||0}Z&&!te&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(ie="WebkitTransition"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(ae="WebkitAnimation"));var se=Z?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function ce(e){se((function(){se(e)}))}function ue(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max.apply(null,t.map((function(t,n){return fe(t)+fe(e[n])})))}function fe(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function de(e,t){var n=e.$options[t];if(n){var r=a(arguments,2);b(n,e,r)}e._hasHookEvent&&e.$emit("hook:"+t)}function pe(e){var t=function(){de(e,$)},n=e._renderEl(),r=e._renderContent(t);!r&&e._isAsyncContent&&G(function(e){var t=z("div",{props:{className:x.PRELOADER}});return G(e.$options.preloader,t),t}(e),ye(n)),de(e,k),ne(e,n,e.$options.container,e.$options.effect,!1),e._checkScrollbar(),e._setScrollbar(),e._adjustDialog(),Y(e.$options.overflowContainer,x.OPEN),he(e,r,!1,!0,t)}function ve(e,t){de(e,j),re(e,e._el,e.$options.container,e.$options.effect,(function(){e._resetAdjustments(),1==t&&(J(e.$options.overflowContainer,x.OPEN),e._resetScrollbar())})),re(e,X(e._el,{className:x.DIALOG},!0,!1),ye(e._el),e.$options.contentEffect,(function(){de(e,L)}))}function he(e,t,n,r,o){void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===o&&(o=null),e._el&&void 0!==t&&(de(e,I),u(t)&&t.className===x.DIALOG||(t=function(e){var t=z("div",{props:{className:x.DIALOG}});return G(e,t),t}(t)),e.$options.cacheContent&&!n&&(e._content=t),ne(e,t,ye(e._el),e.$options.contentEffect,!0,r,(function(){de(e,P),h(o)&&b(o,e)})))}function ye(e){return X(e,{className:x.WRAPPER},!0,!1)}function ge(e,n,r){var o;switch(typeof n){case"string":n.length>0&&document.getElementById(n)?K(o=me(e,document.getElementById(n)),x.HIDE)&&J(o,x.HIDE):o=n;break;case"function":var i=b(n,e);g(i)?(e._isAsyncContent=!0,i.then((function(t){e._isAsyncContent=!1,e.$emit(T,e,ge(e,t),!1,!0,r)})),i.catch((function(t){e._isAsyncContent=!1,e.$emit(T,e,t,!0,!0,r),m(t)}))):o=ge(e,i);break;case"object":u(n)?K(o=me(e,n),x.HIDE)&&J(o,x.HIDE):g(n)?(e._isAsyncContent=!0,n.then((function(t){e._isAsyncContent=!1,e.$emit(T,e,ge(e,t))})),n.catch((function(t){e._isAsyncContent=!1,e.$emit(T,e,t,!0),m(t)}))):y(n)&&t(n,"data")&&(o=ge(e,n.data))}return o}function me(e,t){if(u(t)){if(e._originalNode=t,e._originalNode.childNodes.length){e._originalNodeChildNodes=[];for(var n,r=F(e._originalNode.childNodes);!(n=r()).done;){var o=n.value;e._originalNodeChildNodes.push(o)}}var i=e._originalNode.cloneNode(!0);return U(e._originalNode),i}return null}var _e=new WeakMap;var be=null,Ne=null;var we=0;function Ce(e){this instanceof Ce||m("Modal is a constructor and should be called with the `new` keyword"),this._init(e)}return function(e){e.prototype._init=function(e){var t=this;t._uid=we++,function(e,t){e.$options=C(e,t)}(t,e),function(e){e._events=Object.create(null),e._hasHookEvent=!1}(t),function(e){e._isRegister=!1}(t),function(e){e._el=null,e._content=null,e._isAsyncContent=!1,e._originalNode=null,e._originalNodeChildNodes=null}(t),function(e){e._isShow=!1}(t),function(e){e._isBodyOverflowing=null,e._scrollbarWidth=null}(t),function(e){e._isDestroy=!1}(t),de(t,D),t.$on(T,he)}}(Ce),function(e){var t=/^hook:/;e.prototype.$on=function(e,n){var r=this;if(Array.isArray(e))for(var o=0,i=e.length;o<i;o++)r.$on(e[o],n);else(r._events[e]||(r._events[e]=[])).push(n),t.test(e)&&(r._hasHookEvent=!0);return r},e.prototype.$once=function(e,t){var n=this;function r(){n.$off(e,r),t.apply(n,arguments)}return r.fn=t,n.$on(e,r),n},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(e)){for(var r=0,o=e.length;r<o;r++)n.$off(e[r],t);return n}var i,a=n._events[e];if(!a)return n;if(!t)return n._events[e]=null,n;for(var l=a.length;l--;)if((i=a[l])===t||i.fn===t){a.splice(l,1);break}return n},e.prototype.$emit=function(e){var t=this,n=t._events[e];if(n){n=n.length>1?a(n):n;for(var r=a(arguments,1),o=0,i=n.length;o<i;o++)b(n[o],t,r)}return t}}(Ce),function(e){e.prototype._register=function(){var e=this,t=e._uid;e._hasRegister(t)||(e._isRegister=!0,H.push(t))},e.prototype._unregister=function(){var e=this,t=e._uid;e._hasRegister(t)&&(H.splice(H.indexOf(t),1),e._isRegister=!1)},e.prototype._hasRegister=function(){return H.indexOf(this._uid)>=0}}(Ce),function(e){e.prototype._renderEl=function(){var e=this;if(!this._el){var t=z("div",{props:{className:x.WRAPPER}}),n=z("div",{props:{className:x.CONTAINER},children:[t]});e._el=z("div",{props:{className:x.BLOCK+" "+x.OVERLAY},events:{click:function(t){!function(e,t){(ye(e._el)===t||t.closest('[data-modal-close=""]'))&&e.hide()}(e,t.target)}},children:[n]})}return e._el},e.prototype._renderContent=function(e){var t=this;return t._content&&t.$options.cacheContent||(t._content=ge(t,t.$options.content,e)),t._content},e.prototype.setContent=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!0);var r=this;r._isDestroy||he(r,ge(r,e),t,n,null)}}(Ce),function(e){e.prototype.show=function(){var e=this;return e._hasRegister()||e._isDestroy||(e._isShow=!0,e._register(),pe(e)),e},e.prototype.hide=function(){var e=this;return!e._hasRegister()||e._isDestroy||(ve(e,M()),e._unregister(),e._isShow=!1),e}}(Ce),function(e){e.prototype._adjustDialog=function(){var e=this,t=e._el,n=t.scrollHeight>document.documentElement.clientHeight;1===M()&&(be=n,Ne=e._isBodyOverflowing),(!e._isBodyOverflowing&&n||!Ne&&be)&&(t.style.paddingLeft=e._scrollbarWidth+"px"),(e._isBodyOverflowing&&!n||Ne&&!be)&&(t.style.paddingRight=e._scrollbarWidth+"px")},e.prototype._resetAdjustments=function(){var e=this._el;e.style.paddingLeft="",e.style.paddingRight=""},e.prototype._checkScrollbar=function(){var e=document.body.getBoundingClientRect();this._isBodyOverflowing=e.left+e.right<window.innerWidth,this._scrollbarWidth=function(){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e);var t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t}()},e.prototype._setScrollbar=function(){var e=this;if(e._isBodyOverflowing){for(var t=document.querySelectorAll(S.FIXED_CONTENT),n=0;n<t.length;n++){var r=t[n],o=r.style.paddingRight,i=window.getComputedStyle(r,null).paddingRight;_e.set(r,o),r.style.paddingRight=parseFloat(i)+e._scrollbarWidth+"px"}var a=document.body.style.paddingRight,l=window.getComputedStyle(document.body,null).paddingRight;_e.set(document.body,a),document.body.style.paddingRight=parseFloat(l)+e._scrollbarWidth+"px"}},e.prototype._resetScrollbar=function(){for(var e=document.querySelectorAll(S.FIXED_CONTENT),t=0;t<e.length;t++){var n=e[t],r=_e.get(n);void 0!==r&&(n.style.paddingRight=r,_e.delete(n))}var o=_e.get(document.body);void 0!==o&&(document.body.style.paddingRight=o,_e.delete(document.body))}}(Ce),function(e){e.prototype.destroy=function(){var e=this;e._isDestroy||(e._isDestroy=!0,function(e){e._isBodyOverflowing=null,e._scrollbarWidth=null,be=null,Ne=null}(e),function(e){V(e._el,e.$options.container),e._isShow=!1}(e),function(e){if(e._el=null,e._content=null,e._isAsyncContent=!1,e._originalNode&&e._originalNodeChildNodes){for(var t,n=document.createDocumentFragment(),r=F(e._originalNodeChildNodes);!(t=r()).done;){var o=t.value;n.appendChild(o)}e._originalNodeChildNodes=null,e._originalNode.appendChild(n),e._originalNode=null}}(e),function(e){e._unregister()}(e),de(e,B),function(e){e.$off(),e._hasHookEvent=!1}(e),function(e){e.$options=null}(e))}}(Ce),Ce}));
